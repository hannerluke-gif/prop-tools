// ============================================================
// PROMO BANNER COMPONENT (BEM COMPLIANT)
// 
// Rotating promotional banner with background images and fade transitions.
// Follows strict BEM methodology with .promo-banner as root component.
// 
// BEM Structure:
// .promo-banner                    → Root component
// .promo-banner__slides            → Slide container  
// .promo-banner__slide             → Individual slide
// .promo-banner__slide.is-active   → Active slide state
// 
// Requirements:
// * Fixed height: 60px default, 72px on screens ≤540px
// * Three slides with smooth cross-fade transitions
// * Background images left-aligned to preserve embedded logos
// * JavaScript hover pause functionality (desktop only)
// ============================================================

.promo-banner {
	// z-index map:
	// 1: slide gradient ::after (desktop)
	// 2: active slide
	// 4: text content overlay
	// 6: CTA button
	position: relative;
	width: 100%;
	height: 60px; // default height
	overflow: hidden;
	background: transparent;
	// Prevent layout shift while images load
	display: block;

	// Slide wrapper
	@media (max-width: 540px) {
		height: 72px; // taller on extra-small/medium devices
	}

	&__slides {
		position: relative;
		width: 100%;
		height: 100%;
	}

	&__slide {
		position: absolute;
		inset: 0;
		width: 100%;
		height: 100%;
		background-repeat: no-repeat;
		background-position: left center; // keep embedded logo visible
		background-size: cover; // fill while cropping on the right if needed
		opacity: 0;
		transition: opacity 0.9s ease-in-out; // smooth fade
		pointer-events: none; // allow click to be captured by wrapper

		&.is-active {
			opacity: 1;
			z-index: 2;
		}
	}

		// Content overlay (text)
		&__content {
			position: absolute;
			left: 0;
			top: 0;
			height: 100%;
			display: flex;
			flex-direction: column;
			justify-content: flex-start;
			z-index: 4; // above slides and optional overlay
			color: $text-color;
			pointer-events: none; // we want clicks to go to the banner wrapper
			text-shadow: 0 1px 2px rgba(0,0,0,0.6);
			padding-left: 100px; // indented to avoid embedded logo; adjust if needed
			padding-right: 1rem;
			padding-top: 8px;
		}

		// Text lines (primary and secondary)
		.promo-banner__line {
			display: block;
			line-height: 1;
		}

		.promo-banner__line--primary {
			font-weight: $weight-medium; // lighter than site/nav
			font-size: 0.9rem; // slightly smaller than before
            margin-bottom: 5px; // small gap between primary and secondary lines
		}

		.promo-banner__line--secondary {
			font-weight: $weight-regular;
			font-size: 0.78rem;
			opacity: 0.95;
		}

	// CTA button (Start Evaluation) — positioned relative to .promo-banner root
	&__cta {
		// Positioning: absolute so CTA does not move with slide content
		position: absolute;
		right: 18px;
		top: 50%;
		transform: translateY(-50%);

		// Visuals - use primary button tokens for consistency
		display: inline-flex;
		align-items: center;
		justify-content: center;
		background: $btn-primary-bg;
		color: $btn-primary-color;
		padding: 0.45rem 0.9rem;
		border-radius: $btn-border-radius;
		font-weight: $btn-font-weight;
		font-size: $btn-font-size;
		text-decoration: none;
		pointer-events: auto; // enable clicks
		z-index: 6;

		// Base transitions for smooth interaction feedback
		transition: background-color $btn-transition-duration ease-in-out, 
		           color $btn-transition-duration ease-in-out;

		// Hidden state until JS populates the href
		&[aria-hidden="true"] {
			opacity: 0;
			pointer-events: none;
			transition: opacity 0.15s ease-in-out;
		}

		// Mobile: lower-right corner inside banner
		@media (max-width: 540px) {
			bottom: 8px;
			right: 8px;
			top: auto;
			transform: none;
			padding: 0.5rem 0.9rem;
			font-size: 0.95rem;
			border-radius: $btn-border-radius;
		}

		// Hover and focus states - use primary button tokens
		&:hover,
		&:focus {
			background: $btn-primary-hover-bg;
			color: $btn-primary-color;
			text-decoration: none;
		}

		// Focus styles for keyboard users
		&:focus {
			outline: 3px solid rgba(255,255,255,0.12);
			outline-offset: 2px;
		}

		// Desktop-only positioning adjustments
		@media (min-width: 768px) {
			// Keep background color transitions while preserving centered position
			&:hover,
			&:focus {
				transform: translateY(-50%); // preserve centered position, no movement
				// No box-shadow change on hover/focus to keep visuals static
			}
		}
	}

	// Reduced motion: disable fade transition
	@media (prefers-reduced-motion: reduce) {
		&__slide {
			transition: none;
		}
	}

	// Cursor indicates interactivity (JS: clicking banner may advance slide)
	cursor: pointer;

	// Background variants (generated via map loop below)
}

// Slide background image variants (Sass map for scalability)
$promo-banner-slide-images: (
	apex: "/static/img/banner/banner_apex.jpg",
	tpt: "/static/img/banner/banner_tpt.jpg",
	tradeify: "/static/img/banner/banner_tradeify.jpg",
);

@each $name, $url in $promo-banner-slide-images {
	.promo-banner__slide--#{$name} { background-image: url(#{$url}); }
}

// Responsive adjustments: desktop single-line layout
@media (min-width: 768px) {
	.promo-banner {
		&__content {
			flex-direction: row;
			align-items: center;
			/* center content horizontally in the viewport instead of large left padding */
			left: 50%;
			transform: translateX(-50%);
			padding-left: 0;
			gap: 0.5rem;
			/* avoid colliding with CTA on the right */
			max-width: calc(100% - 220px);
			text-align: center;

			// Slightly larger text on desktop
			.promo-banner__line--primary {
				font-size: 0.95rem;
			}

			.promo-banner__line--secondary {
				font-size: 0.85rem;
			}
		}
	}
}

// Desktop-only, side-weighted gradient overlay for promo banner slides
// Note: the project uses BEM naming `.promo-banner__slide` (not `-slide`).
// We add a ::after pseudo-element to each slide so the gradient sits above
// the background image but below the content/CTA. This is intentionally
// wrapped in a desktop-only media query so mobile views are unaffected.
@media (min-width: 992px) {
	.promo-banner {
		&__slide {
			&::after {
				content: "";
				position: absolute;
				inset: 0;
				pointer-events: none;
				z-index: 1; /* sits above the slide background but below .promo-banner__content (z-index:4) and CTA (z-index:6) */
				/* Side-weighted: transparent left so embedded logos remain visible, gradually darker toward the right */
				background: linear-gradient(90deg,
					rgba(0,0,0,0) 0%,
					rgba(0,0,0,0) 18%,
					rgba(0,0,0,0.18) 55%,
					rgba(0,0,0,0.58) 100%);
			}
		}
	}
}

